<!DOCTYPE html>  <html> <head>   <title>004_step.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">       <link rel="stylesheet" media="all" href="docco.css" />       <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>      <script src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script>        <link rel="stylesheet" media="all" href=" http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/ui-lightness/jquery-ui.css" />                <script>        jQuery.fn.replaceAttr = function(aName, rxString, repString) {         return this.attr(             aName,             function() {                 return jQuery(this).attr(aName).replace(rxString, repString);             }         );     };     $(document).ready(function(){               var coffee_file_array = [];         var obj = $('.source');       var arr = $.makeArray(obj);       $('.source').each( function(){ coffee_file_array.push($.trim($(this).text()));});        var current_page = $.trim($('title').text());        var number_of_links = $('.source').length;             $( "#site_nav" ).text(current_page);          for (k in arr){  coffee_file_array.push($.trim(arr[k]['innerText'])  );     }         console.log(coffee_file_array.indexOf(current_page));          console.log($.inArray(current_page, coffee_file_array));         $( "#slider-range-min" ).slider({            range: "min", value: $.inArray(current_page, coffee_file_array),            min: 0, max: number_of_links,           slide: function(ev,ui){                $( "#site_nav" ).replaceAttr('href', '#',coffee_file_array[ui.value].replace('.coffee','.html'));             $('#site_nav').text("Jump to ... "+coffee_file_array[ui.value]);           }         });     });      </script> </head> <body>           <div id="container">     <div id="background"></div>               <a id="site_nav" href="#" >Site Navigation</a>        <div class="demo">      <div id="slider-range-min"></div>     </div>                      <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="000_intro.html">                 000_intro.coffee               </a>                                           <a class="source" href="001_http.html">                 001_http.coffee               </a>                                           <a class="source" href="002_child_process.html">                 002_child_process.coffee               </a>                                           <a class="source" href="003_pump.html">                 003_pump.coffee               </a>                                           <a class="source" href="004_step.html">                 004_step.coffee               </a>                                           <a class="source" href="005_chat.html">                 005_chat.coffee               </a>                                           <a class="source" href="006_socket_chat.html">                 006_socket_chat.coffee               </a>                                           <a class="source" href="007_socket.io_chat.html">                 007_socket.io_chat.coffee               </a>                                           <a class="source" href="008_0_connect.html">                 008_0_connect.coffee               </a>                                           <a class="source" href="008_1_serve-js.html">                 008_1_serve-js.coffee               </a>                                           <a class="source" href="008_2_log-it.html">                 008_2_log-it.coffee               </a>                                           <a class="source" href="009_express.html">                 009_express.coffee               </a>                                           <a class="source" href="010_0_express.html">                 010_0_express.coffee               </a>                                           <a class="source" href="010_1_products.html">                 010_1_products.coffee               </a>                                           <a class="source" href="011_0_express.html">                 011_0_express.coffee               </a>                                           <a class="source" href="011_1_products.html">                 011_1_products.coffee               </a>                                           <a class="source" href="012_0_file_upload.html">                 012_0_file_upload.coffee               </a>                                           <a class="source" href="012_1_photos.html">                 012_1_photos.coffee               </a>                                           <a class="source" href="012_2_products.html">                 012_2_products.coffee               </a>                                           <a class="source" href="013_0_auth.html">                 013_0_auth.coffee               </a>                                           <a class="source" href="013_1_photos.html">                 013_1_photos.coffee               </a>                                           <a class="source" href="013_2_products.html">                 013_2_products.coffee               </a>                                           <a class="source" href="013_3_users.html">                 013_3_users.coffee               </a>                                           <a class="source" href="014_0_tools.html">                 014_0_tools.coffee               </a>                                           <a class="source" href="015_deploy.html">                 015_deploy.coffee               </a>                                           <a class="source" href="016_coffeescript.html">                 016_coffeescript.coffee               </a>                                           <a class="source" href="017_0_modules.html">                 017_0_modules.coffee               </a>                                           <a class="source" href="017_1_test_modules.html">                 017_1_test_modules.coffee               </a>                                           <a class="source" href="018_0_mongoose.html">                 018_0_mongoose.coffee               </a>                                           <a class="source" href="018_1_photos.html">                 018_1_photos.coffee               </a>                                           <a class="source" href="018_2_products.html">                 018_2_products.coffee               </a>                                           <a class="source" href="018_3_users.html">                 018_3_users.coffee               </a>                                           <a class="source" href="019_async_interation.html">                 019_async_interation.coffee               </a>                                           <a class="source" href="020_tdd.html">                 020_tdd.coffee               </a>                                           <a class="source" href="021_mongoose_update.html">                 021_mongoose_update.coffee               </a>                                           <a class="source" href="022_bundling.html">                 022_bundling.coffee               </a>                                           <a class="source" href="023_express_resources.html">                 023_express_resources.coffee               </a>                                           <a class="source" href="024_0_benchmark.html">                 024_0_benchmark.coffee               </a>                                           <a class="source" href="024_1_test.html">                 024_1_test.coffee               </a>                                           <a class="source" href="024_2_statistics.html">                 024_2_statistics.coffee               </a>                                           <a class="source" href="025_nginx.html">                 025_nginx.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               004_step.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h1>Steps</h1>

<hr />

<ul>
<li><a href="https://github.com/creationix/step">Step </a> - An async control-flow library that makes stepping through logic easy.</li>
</ul>

<hr />             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">http= </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">)</span>
<span class="nv">fs= </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
<span class="nv">step= </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;step&#39;</span><span class="p">)</span>

<span class="nv">file_path = </span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&#39;/asset/cat.jpg&#39;</span>
<span class="nv">file_size = </span><span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The step library exports a single function called Step. It accepts any number of functions as arguments and runs them in serial order using the passed in this context as the callback to the next step.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">step</span> <span class="nv">get_file_size = </span><span class="o">-&gt;</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">stat</span> <span class="nx">file_path</span><span class="p">,</span> <span class="k">this</span>
<span class="p">,</span> <span class="nv">store_file_size = </span><span class="nf">(err, stat) -&gt;</span>
  <span class="k">throw</span> <span class="nx">err</span>  <span class="k">if</span> <span class="nx">err</span>
  <span class="nv">file_size = </span><span class="nx">stat</span><span class="p">.</span><span class="nx">size</span>
  <span class="k">this</span>
<span class="p">,</span> <span class="nv">read_file_into_memory = </span><span class="nf">() -&gt;</span>
  <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span> <span class="nx">file_path</span><span class="p">,</span> <span class="k">this</span>
<span class="p">,</span> <span class="nv">create_server = </span><span class="nf">(err, file_content) -&gt;</span>   
  <span class="k">throw</span> <span class="nx">err</span>  <span class="k">if</span> <span class="nx">err</span> 
  <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span> <span class="nf">(request, response) -&gt;</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span> <span class="mi">200</span><span class="p">,</span>
      <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;image/jpeg&#39;</span>
      <span class="s1">&#39;Content-Length&#39;</span><span class="o">:</span> <span class="nx">file_size</span> 
    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span> <span class="nx">file_content</span>
  <span class="p">.</span><span class="nx">listen</span> <span class="mi">4000</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div>  </body> </html>