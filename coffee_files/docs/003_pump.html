<!DOCTYPE html>  <html> <head>   <title>003_pump.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="000_intro.html">                 000_intro.coffee               </a>                                           <a class="source" href="001_http.html">                 001_http.coffee               </a>                                           <a class="source" href="002_child_process.html">                 002_child_process.coffee               </a>                                           <a class="source" href="003_pump.html">                 003_pump.coffee               </a>                                           <a class="source" href="004_step.html">                 004_step.coffee               </a>                                           <a class="source" href="005_chat.html">                 005_chat.coffee               </a>                                           <a class="source" href="006_socket_chat.html">                 006_socket_chat.coffee               </a>                                           <a class="source" href="007_socket.io_chat.html">                 007_socket.io_chat.coffee               </a>                                           <a class="source" href="008_0_connect.html">                 008_0_connect.coffee               </a>                                           <a class="source" href="008_1_serve-js.html">                 008_1_serve-js.coffee               </a>                                           <a class="source" href="008_2_log-it.html">                 008_2_log-it.coffee               </a>                                           <a class="source" href="009_express.html">                 009_express.coffee               </a>                                           <a class="source" href="010_0_express2.html">                 010_0_express2.coffee               </a>                                           <a class="source" href="010_1_products.html">                 010_1_products.coffee               </a>                                           <a class="source" href="011_express2.html">                 011_express2.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               003_pump.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h1>Pump Streams</h1>

<hr />

<ul>
<li><a href="http://nodejs.org/docs/v0.4.9/api/streams.html">Node API doc - Streams</a></li>
<li><a href="http://nodejs.org/docs/v0.4.9/api/fs.html">Node API doc - File System</a></li>
<li><a href="http://nodejs.org/docs/v0.4.9/api/util.html#util.pump">Node API doc - Util</a></li>
</ul>

<hr />

<h3>Streams</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>A stream is an abstract interface implemented by various objects in Node. For example a request to an HTTP server is a stream, as is stdout. </p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p><strong>Streams are readable, writable, or both.</strong> All streams are instances of EventEmitter.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">http= </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">)</span>   </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <h3>File System</h3>

<p>File I/O is provided by simple wrappers around standard POSIX functions. To use this module do require('fs'). All the methods have asynchronous and synchronous forms.</p>

<p>The asynchronous form always take a completion callback as its last argument. The arguments passed to the completion callback depend on the method, but the first argument is always reserved for an exception. If the operation was completed successfully, then the first argument will be null or undefined.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">fs= </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
<span class="nv">util= </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;util&#39;</span><span class="p">)</span>
<span class="nv">file_path = </span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&#39;/asset/cat.jpg&#39;</span>              </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <ul>
<li><p>fs.stat(path, [callback])
Asynchronous stat(2). The callback gets two arguments (err, stats) where stats is a <code>fs.Stats</code> object.  </p></li>
<li><p>fs.Stats
Objects returned from fs.stat() and fs.lstat() are of this type. -- stats.isFile(), 
stats.isDirectory(), 
stats.isBlockDevice(), 
stats.isCharacterDevice(), 
stats.isSymbolicLink() (only valid with fs.lstat()), 
stats.isFIFO(), 
stats.isSocket(), </p></li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">fs</span><span class="p">.</span><span class="nx">stat</span> <span class="nx">file_path</span><span class="p">,</span> <span class="nf">(err, stat) -&gt;</span> 
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">file_path</span>
  <span class="k">if</span> <span class="nx">err</span>
    <span class="k">throw</span> <span class="nx">err</span>        
    
  <span class="nv">server = </span><span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span> <span class="nf">(req, res) -&gt;</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span> <span class="mi">200</span><span class="p">,</span> 
      <span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span> <span class="s1">&#39;image/jpeg&#39;</span>
      <span class="s1">&#39;Content-Length&#39;</span><span class="o">:</span> <span class="nx">stat</span><span class="p">.</span><span class="nx">size</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Returns a new ReadStream object
readStream is a Readable Stream.  </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">readStream = </span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="nx">file_path</span><span class="p">)</span> </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h3>util.pump</h3>

<p><strong>Experimental</strong> 
Read the data from readableStream and send it to the writableStream. When writableStream.write(data) returns false readableStream will be paused until the drain event occurs on the writableStream. callback gets an error as its only argument and is called when writableStream is closed or when an error occurs.  </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">util</span><span class="p">.</span><span class="nx">pump</span> <span class="nx">readStream</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nf">(err) -&gt;</span>
      <span class="k">if</span> <span class="nx">err</span>
        <span class="k">throw</span> <span class="nx">err</span>

  <span class="nx">server</span><span class="p">.</span><span class="nx">listen</span> <span class="mi">4000</span>
  

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 