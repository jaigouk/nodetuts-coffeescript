<!DOCTYPE html>  <html> <head>   <title>020_tdd.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">       <link rel="stylesheet" media="all" href="docco.css" />       <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>      <script src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script>        <link rel="stylesheet" media="all" href=" http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/ui-lightness/jquery-ui.css" />                <script>         $(document).ready(function(){               var coffee_file_array = [];         var obj = $('.source');       var arr = $.makeArray(obj);       $('.source').each( function(){ coffee_file_array.push($.trim($(this).text()));});        var current_page = $.trim($('title').text());        var number_of_links = $('.source').length;             $( "#site_nav" ).text(current_page);          for (k in arr){  coffee_file_array.push($.trim(arr[k]['innerText'])  );     }         console.log(coffee_file_array.indexOf(current_page));          console.log($.inArray(current_page, coffee_file_array));         $( "#slider" ).slider({            range: "min", value: $.inArray(current_page, coffee_file_array),            min: 0,            max: number_of_links,           step: 1,           slide: function(ev,ui){                $('#site_nav').text("JumpTo -> "+coffee_file_array[ui.value]).attr('href',coffee_file_array[ui.value].replace('.coffee','.html'));            }                                             });     });      </script> </head> <body>           <div id="container">     <div id="background"></div>                  <div id="menu_wrapper" class="grey">           <div class="left"></div>           <ul id="menu">               <li><a href="http://jaigouk.github.com/nodetuts-coffeescript">Home</a></li>               <li><a href="#" id="site_nav">Navigation</a></li>           </ul>       </div>       <div id="slider"></div>       <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">            </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h1>Unit tests and TDD in node.js</h1>

<hr />             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h1>TDD Lib Ranking (5th July, 2011)</h1>

<h3>Gibhub (#watchers)</h3>

<ul>
<li><a href="https://github.com/pivotal/jasmine/wiki">Jasmine</a> - 1504</li>
<li><a href="https://github.com/cloudhead/vows">vows</a> - 457  </li>
<li><a href="http://visionmedia.github.com/expresso">Expresso</a> - 401 </li>
<li><a href="http://github.com/visionmedia/should.js">should.js</a> - 114 </li>
</ul>

<hr />

<h3><a href="http://search.npmjs.org/">npm registry</a> (#depended on)</h3>

<ul>
<li>vows - 48</li>
<li>expresso - 12   </li>
<li>should - 6</li>
<li>jasmine-node - 4</li>
</ul>

<hr />

<h3><a href="http://www.nodecloud.org/">NodeCloud Ranking (ranking#)</a></h3>

<ul>
<li>vows - 23</li>
<li>expresso - no ranking</li>
<li>should - no ranking</li>
<li>jasmine-node - no ranking</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">vows = </span><span class="nx">require</span> <span class="s1">&#39;vows&#39;</span>
<span class="nv">fs = </span><span class="nx">require</span> <span class="s1">&#39;fs&#39;</span>
<span class="nv">assert= </span><span class="nx">require</span> <span class="s1">&#39;assert&#39;</span>

<span class="nx">vows</span>
<span class="p">.</span><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Division by zero&#39;</span><span class="p">)</span>

<span class="p">.</span><span class="nx">addBatch</span>
 <span class="s1">&#39;when dividing a number by zero&#39;</span><span class="o">:</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>topic is function and returns a value</p>             </td>             <td class="code">               <div class="highlight"><pre>   <span class="nv">topic: </span><span class="o">-&gt;</span> <span class="mi">42</span> <span class="o">/</span> <span class="mi">0</span>                      </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>the topic value is used as an argument</p>             </td>             <td class="code">               <div class="highlight"><pre>   <span class="s1">&#39;we get Infinity&#39;</span> <span class="o">:</span> <span class="nf">(topic) -&gt;</span>
     <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span> <span class="nx">topic</span><span class="p">,</span> <span class="kc">Infinity</span>

 <span class="s1">&#39;but when dividing zero by zero&#39;</span><span class="o">:</span>         </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>topic is only run once. Hence the value is different from
example value above</p>             </td>             <td class="code">               <div class="highlight"><pre>   <span class="nv">topic: </span><span class="o">-&gt;</span> <span class="mi">0</span> <span class="o">/</span> <span class="mi">0</span>
   <span class="s1">&#39;we get a value which&#39;</span><span class="o">:</span>
     <span class="s1">&#39;is not a number&#39;</span><span class="o">:</span> <span class="nf">(topic) -&gt;</span>
       <span class="nx">assert</span><span class="p">.</span><span class="nb">isNaN</span> <span class="nx">topic</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>topic has a scope. we use the same 0 / 0 value here.</p>             </td>             <td class="code">               <div class="highlight"><pre>     <span class="s1">&#39;is not equal to itself&#39;</span><span class="o">:</span> <span class="nf">(topic) -&gt;</span>
       <span class="nx">assert</span><span class="p">.</span><span class="nx">notEqual</span> <span class="nx">topic</span><span class="p">,</span> <span class="nx">topic</span>       


 </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h2>Writing asynchronous tests</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">.</span><span class="nx">addBatch</span>
  <span class="s1">&#39;A introduction file&#39;</span><span class="o">:</span>
    <span class="nv">topic: </span><span class="o">-&gt;</span>    </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>this.callback function is available inside all topics
When this.callback is called, it passes on the arguments
it received to the test functions, one by one, as if 
the values were returned by the topic function itself.
this allows us to decouple callback from they async function call
topics which do not return anything must take use of 'this.callback'</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">fs</span><span class="p">.</span><span class="nx">stat</span> <span class="s1">&#39;000_intro.coffee&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">callback</span>
    <span class="s1">&#39;can be accessed&#39;</span><span class="o">:</span> <span class="nf">(err, stat) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>we have no err</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">assert</span><span class="p">.</span><span class="nx">isNull</span> <span class="nx">err</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>we have a stat object</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">assert</span><span class="p">.</span><span class="nx">isObject</span> <span class="nx">stat</span>
    <span class="s1">&#39;is not empty&#39;</span><span class="o">:</span> <span class="nf">(err, stat) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>the file size is > 0</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">assert</span><span class="p">.</span><span class="nx">isNotZero</span> <span class="nx">stat</span><span class="p">.</span><span class="nx">size</span>
                      
<span class="p">.</span><span class="nx">run</span><span class="p">()</span>   

</pre></div>             </td>           </tr>                </tbody>     </table>   </div>         <div id="jump_to">       Jump To &hellip;       <div id="jump_wrapper">         <div id="jump_page">                                     <a class="source" href="000_intro.html">               000_intro.coffee             </a>                                     <a class="source" href="001_http.html">               001_http.coffee             </a>                                     <a class="source" href="002_child_process.html">               002_child_process.coffee             </a>                                     <a class="source" href="003_pump.html">               003_pump.coffee             </a>                                     <a class="source" href="004_step.html">               004_step.coffee             </a>                                     <a class="source" href="005_chat.html">               005_chat.coffee             </a>                                     <a class="source" href="006_socket_chat.html">               006_socket_chat.coffee             </a>                                     <a class="source" href="007_socket.io_chat.html">               007_socket.io_chat.coffee             </a>                                     <a class="source" href="008_0_connect.html">               008_0_connect.coffee             </a>                                     <a class="source" href="008_1_serve-js.html">               008_1_serve-js.coffee             </a>                                     <a class="source" href="008_2_log-it.html">               008_2_log-it.coffee             </a>                                     <a class="source" href="009_express.html">               009_express.coffee             </a>                                     <a class="source" href="010_0_express.html">               010_0_express.coffee             </a>                                     <a class="source" href="010_1_products.html">               010_1_products.coffee             </a>                                     <a class="source" href="011_0_express.html">               011_0_express.coffee             </a>                                     <a class="source" href="011_1_products.html">               011_1_products.coffee             </a>                                     <a class="source" href="012_0_file_upload.html">               012_0_file_upload.coffee             </a>                                     <a class="source" href="012_1_photos.html">               012_1_photos.coffee             </a>                                     <a class="source" href="012_2_products.html">               012_2_products.coffee             </a>                                     <a class="source" href="013_0_auth.html">               013_0_auth.coffee             </a>                                     <a class="source" href="013_1_photos.html">               013_1_photos.coffee             </a>                                     <a class="source" href="013_2_products.html">               013_2_products.coffee             </a>                                     <a class="source" href="013_3_users.html">               013_3_users.coffee             </a>                                     <a class="source" href="014_0_tools.html">               014_0_tools.coffee             </a>                                     <a class="source" href="015_deploy.html">               015_deploy.coffee             </a>                                     <a class="source" href="016_coffeescript.html">               016_coffeescript.coffee             </a>                                     <a class="source" href="017_0_modules.html">               017_0_modules.coffee             </a>                                     <a class="source" href="017_1_test_modules.html">               017_1_test_modules.coffee             </a>                                     <a class="source" href="018_0_mongoose.html">               018_0_mongoose.coffee             </a>                                     <a class="source" href="018_1_photos.html">               018_1_photos.coffee             </a>                                     <a class="source" href="018_2_products.html">               018_2_products.coffee             </a>                                     <a class="source" href="018_3_users.html">               018_3_users.coffee             </a>                                     <a class="source" href="019_async_interation.html">               019_async_interation.coffee             </a>                                     <a class="source" href="020_tdd.html">               020_tdd.coffee             </a>                                     <a class="source" href="021_mongoose_update.html">               021_mongoose_update.coffee             </a>                                     <a class="source" href="022_bundling.html">               022_bundling.coffee             </a>                                     <a class="source" href="023_express_resources.html">               023_express_resources.coffee             </a>                                     <a class="source" href="024_0_benchmark.html">               024_0_benchmark.coffee             </a>                                     <a class="source" href="024_1_test.html">               024_1_test.coffee             </a>                                     <a class="source" href="024_2_statistics.html">               024_2_statistics.coffee             </a>                                     <a class="source" href="025_nginx.html">               025_nginx.coffee             </a>                                     <a class="source" href="026_0_everyauth.html">               026_0_everyauth.coffee             </a>                                     <a class="source" href="026_1_users.html">               026_1_users.coffee             </a>                                     <a class="source" href="027_0_kue.html">               027_0_kue.coffee             </a>                                     <a class="source" href="027_1_kue_consumer.html">               027_1_kue_consumer.coffee             </a>                                     <a class="source" href="028_classes_prototype_closure.html">               028_classes_prototype_closure.coffee             </a>                    </div>       </div>     </div>    </body> </html>